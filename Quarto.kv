#: kivy 1.11.0
#: import exit sys.exit
#: import colors src.constants.Colors

<Board>:
    spacing: 10, 10
    canvas:
        Color:
            rgba: colors.board
        Rectangle:
            pos: self.pos
            size: self.size

<Cell>:
    allow_stretch: True
    keep_ratio: True


<PiecesBar>:
    orientation: 'horizontal'
    size_hint_y: 0.1
    canvas:
        Color:
            rgba: colors.pieces_bar
        Rectangle:
            pos: self.pos
            size: self.size

<Message>:
    title: 'Game Over!'
    size_hint: 0.625, 0.625
    auto_dismiss: False
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: ''
            id: message
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.75
            Button:
                text: 'Play Again'
                on_release:
                    if app.sm.current in ('sp', 'mp'): app.sm.current_screen.board.reset()
            Button:
                text: 'Main Menu'
                on_release:
                    if app.sm.current in ('sp', 'mp'): \
                    app.sm.current_screen.board.reset()
                    app.sm.transition.direction = 'right'
                    app.sm.current = 'menu'

<Instructions>:
    title: 'Instructions'
    size_hint: 0.8, 0.8
    auto_dismiss: True
    BoxLayout:
        orientation: 'vertical'
        AsyncImage:
            allow_stretch: True
            keep_ratio: True
            id: img
        Button:
            text: 'Close'
            size_hint_y: 0.5
            on_release:
                root.dismiss()

<MenuLayout>:
    orientation: 'vertical'

<BackButton>:
    text: 'Back'
    background_color: colors.cyan
    on_release:
        app.sm.transition.direction = 'right'
        app.sm.current = app.sm.previous()

<DifficultyButton>:
    on_release:
        app.sm.transition.direction = 'left'
        app.sm.current = 'sp'
        app.sm.current_screen.board.set_difficulty(self.text.lower())
        app.sm.current_screen.board.first_move()    # Start Game

<MainMenuScreen>:
    MenuLayout:
        Button:
            text: 'Play Quarto'
            background_color: colors.green
            on_release:
                app.sm.transition.direction = 'left'
                app.sm.current = 'play'
        Button:
            text: 'Instructions'
            background_color: colors.blue
            on_release:
                app.instructions.open()
        Button:
            text: 'Quit'
            background_color: colors.red
            on_release: exit(0)

<PlayMenuScreen>:
    MenuLayout:
        Button:
            text: 'Single-player'
            on_release:
                app.sm.transition.direction = 'left'
                app.sm.current = 'diff'
        Button:
            text: 'Multi-player'
            on_release:
                app.sm.transition.direction = 'left'
                app.sm.current = 'mp'
        BackButton:


<DifficultyMenuScreen>:
    MenuLayout:
        DifficultyButton:
            text: 'Easy'
        DifficultyButton:
            text: 'Medium'
        DifficultyButton:
            text: 'Hard'
        BackButton:
